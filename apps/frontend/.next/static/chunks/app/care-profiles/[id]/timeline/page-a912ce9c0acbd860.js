(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[80],{42131:function(e,t,r){"use strict";r.d(t,{Z:function(){return createLucideIcon}});var n=r(74423),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,t)=>{let r=(0,n.forwardRef)(({color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,children:o,...c},u)=>(0,n.createElement)("svg",{ref:u,...s,width:a,height:a,stroke:r,strokeWidth:i?24*Number(l)/Number(a):l,className:`lucide lucide-${toKebabCase(e)}`,...c},[...t.map(([e,t])=>(0,n.createElement)(e,t)),...(Array.isArray(o)?o:[o])||[]]));return r.displayName=`${e}`,r}},43360:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(42131);let s=(0,n.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8966:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(42131);let s=(0,n.Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},7388:function(e,t,r){"use strict";var n,s;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(63100)},42268:function(e,t,r){Promise.resolve().then(r.bind(r,50873))},50873:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return TimelinePage}});var n=r(67647),s=r(74423),a=r(83432),l=r(65201),i=r(42131);let o=(0,i.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),c=(0,i.Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),u=(0,i.Z)("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),d=(0,i.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),m=(0,i.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),p=(0,i.Z)("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);var h=r(43360);let x=(0,i.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var f=r(8966);let y={NOTE:o,SLEEP:c,MEAL:u,SYMPTOM:d,ACTIVITY:m,MEDICATION:p},b={NOTE:"bg-slate-100 text-slate-600",SLEEP:"bg-indigo-100 text-indigo-600",MEAL:"bg-amber-100 text-amber-600",SYMPTOM:"bg-red-100 text-red-600",ACTIVITY:"bg-green-100 text-green-600",MEDICATION:"bg-purple-100 text-purple-600"},g=["\uD83D\uDE22","\uD83D\uDE14","\uD83D\uDE10","\uD83D\uDE42","\uD83D\uDE0A"];function TimelinePage(){let e=(0,a.useParams)(),t=e.id,[r,i]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[d,m]=(0,s.useState)(!0),[p,v]=(0,s.useState)(!1),[j,N]=(0,s.useState)(null),[w,k]=(0,s.useState)("NOTE"),[T,S]=(0,s.useState)(""),[_,E]=(0,s.useState)(null),[C,D]=(0,s.useState)(!1);(0,s.useEffect)(()=>{loadData()},[t]);let loadData=async()=>{try{let[e,r]=await Promise.all([(0,l.W)("/entries/".concat(t)),(0,l.W)("/summaries/".concat(t))]);i(e),u(r)}catch(e){console.error("Failed to load data:",e)}finally{m(!1)}},handleCreateEntry=async e=>{e.preventDefault(),D(!0);try{await (0,l.W)("/entries/".concat(t),{method:"POST",body:JSON.stringify({type:w,freeText:T,moodScore:_,timestamp:new Date().toISOString()})}),v(!1),S(""),E(null),loadData()}catch(e){console.error("Failed to create entry:",e)}finally{D(!1)}},generateSummary=async e=>{N(e);try{await (0,l.W)("/summaries/".concat(t,"/daily"),{method:"POST",body:JSON.stringify({date:e})}),loadData()}catch(e){console.error("Failed to generate summary:",e)}finally{N(null)}},L=r.reduce((e,t)=>{let r=new Date(t.timestamp).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"});return e[r]||(e[r]=[]),e[r].push(t),e},{}),getSummaryForDate=e=>{let t=new Date(e).toISOString().split("T")[0];return c.find(e=>e.periodStart.startsWith(t))};return d?(0,n.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,n.jsx)("div",{className:"animate-pulse text-slate-500",children:"Loading timeline..."})}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Timeline"}),(0,n.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition shadow-lg shadow-blue-500/25",children:[(0,n.jsx)(h.Z,{className:"w-5 h-5"}),"New Entry"]})]}),p&&(0,n.jsxs)("div",{className:"mb-6 bg-white rounded-xl border border-slate-200 p-6 shadow-sm",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"New Entry"}),(0,n.jsxs)("form",{onSubmit:handleCreateEntry,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Type"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.keys(y).map(e=>{let t=y[e];return(0,n.jsxs)("button",{type:"button",onClick:()=>k(e),className:"flex items-center gap-2 px-3 py-2 rounded-lg border transition ".concat(w===e?"border-blue-500 bg-blue-50 text-blue-700":"border-slate-200 hover:border-slate-300 text-slate-600"),children:[(0,n.jsx)(t,{className:"w-4 h-4"}),(0,n.jsx)("span",{className:"text-sm capitalize",children:e.toLowerCase()})]},e)})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Note"}),(0,n.jsx)("textarea",{value:T,onChange:e=>S(e.target.value),required:!0,rows:3,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-900",placeholder:"What happened?"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mood (optional)"}),(0,n.jsx)("div",{className:"flex gap-2",children:g.map((e,t)=>(0,n.jsx)("button",{type:"button",onClick:()=>E(_===t+1?null:t+1),className:"w-10 h-10 rounded-lg border text-xl transition ".concat(_===t+1?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300"),children:e},t))})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("button",{type:"submit",disabled:C,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition",children:C?"Saving...":"Save Entry"}),(0,n.jsx)("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg transition",children:"Cancel"})]})]})]}),0===Object.keys(L).length?(0,n.jsxs)("div",{className:"text-center py-16 bg-white rounded-xl border border-slate-200",children:[(0,n.jsx)(x,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No entries yet"}),(0,n.jsx)("p",{className:"text-slate-500 mb-6",children:"Start documenting by creating your first entry"}),(0,n.jsxs)("button",{onClick:()=>v(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:[(0,n.jsx)(h.Z,{className:"w-5 h-5"}),"Create Entry"]})]}):(0,n.jsx)("div",{className:"space-y-8",children:Object.entries(L).map(e=>{let[t,r]=e,s=getSummaryForDate(r[0].timestamp),a=new Date(r[0].timestamp).toISOString().split("T")[0];return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:t}),(0,n.jsxs)("button",{onClick:()=>generateSummary(a),disabled:j===a,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg transition",children:[(0,n.jsx)(f.Z,{className:"w-4 h-4"}),j===a?"Generating...":s?"Regenerate Summary":"Generate Summary"]})]}),s&&(0,n.jsxs)("div",{className:"mb-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl border border-purple-100 p-5",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,n.jsx)(f.Z,{className:"w-5 h-5 text-purple-600"}),(0,n.jsx)("span",{className:"font-semibold text-purple-900",children:"AI Summary"})]}),(0,n.jsx)("p",{className:"text-slate-700 mb-4",children:s.summaryText}),(0,n.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[s.insightsJson.positives&&s.insightsJson.positives.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Positives"}),(0,n.jsx)("ul",{className:"mt-1 space-y-1",children:s.insightsJson.positives.map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[(0,n.jsx)("span",{className:"text-green-500",children:"âœ“"}),e]},t))})]}),s.insightsJson.concerns&&s.insightsJson.concerns.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-xs font-medium text-amber-600 uppercase tracking-wide",children:"Concerns"}),(0,n.jsx)("ul",{className:"mt-1 space-y-1",children:s.insightsJson.concerns.map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[(0,n.jsx)("span",{className:"text-amber-500",children:"!"}),e]},t))})]})]})]}),(0,n.jsx)("div",{className:"space-y-3",children:r.map(e=>{let t=y[e.type]||o,r=new Date(e.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return(0,n.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-4 hover:shadow-sm transition",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"p-2 rounded-lg ".concat(b[e.type]||b.NOTE),children:(0,n.jsx)(t,{className:"w-5 h-5"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-slate-900 capitalize",children:e.type.toLowerCase()}),(0,n.jsx)("span",{className:"text-xs text-slate-400",children:r}),e.moodScore&&(0,n.jsx)("span",{className:"ml-auto text-lg",children:g[e.moodScore-1]})]}),(0,n.jsx)("p",{className:"text-slate-600",children:e.freeText}),(0,n.jsxs)("p",{className:"text-xs text-slate-400 mt-2",children:["by ",e.author.name]})]})]})},e.id)})})]},t)})})]})}},65201:function(e,t,r){"use strict";r.d(t,{W:function(){return request}});var n=r(7388);let s=n.env.NEXT_PUBLIC_API_URL||"http://localhost:8000";async function request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=localStorage.getItem("token"),n={"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{},...t.headers},a=await fetch("".concat(s).concat(e),{...t,headers:n});if(!a.ok){let e=await a.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||"Something went wrong")}return a.json()}},63100:function(e){!function(){var t={229:function(e){var t,r,n,s=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}function runClearTimeout(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var a=[],l=!1,i=-1;function cleanUpNextTick(){l&&n&&(l=!1,n.length?a=n.concat(a):i=-1,a.length&&drainQueue())}function drainQueue(){if(!l){var e=runTimeout(cleanUpNextTick);l=!0;for(var t=a.length;t;){for(n=a,a=[];++i<t;)n&&n[i].run();i=-1,t=a.length}n=null,l=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new Item(e,t)),1!==a.length||l||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=noop,s.addListener=noop,s.once=noop,s.off=noop,s.removeListener=noop,s.removeAllListeners=noop,s.emit=noop,s.prependListener=noop,s.prependOnceListener=noop,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function __nccwpck_require__(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}},a=!0;try{t[e](s,s.exports,__nccwpck_require__),a=!1}finally{a&&delete r[e]}return s.exports}__nccwpck_require__.ab="//";var n=__nccwpck_require__(229);e.exports=n}()},29063:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(74423),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var n,a={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)l.call(t,n)&&!o.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:u,props:a,_owner:i.current}}t.Fragment=a,t.jsx=q,t.jsxs=q},67647:function(e,t,r){"use strict";e.exports=r(29063)},83432:function(e,t,r){e.exports=r(13590)}},function(e){e.O(0,[181,385,744],function(){return e(e.s=42268)}),_N_E=e.O()}]);