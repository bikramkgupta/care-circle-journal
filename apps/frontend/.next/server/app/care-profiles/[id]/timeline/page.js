(()=>{var e={};e.id=80,e.ids=[80],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57310:e=>{"use strict";e.exports=require("url")},20310:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>o});var a=s(43712),r=s(14887),l=s(16841),i=s.n(l),n=s(50873),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let o=["",{children:["care-profiles",{children:["[id]",{children:["timeline",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,24794)),"/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/care-profiles/[id]/timeline/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,24599)),"/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/care-profiles/[id]/layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,11127)),"/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,50455,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/care-profiles/[id]/timeline/page.tsx"],m="/care-profiles/[id]/timeline/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/care-profiles/[id]/timeline/page",pathname:"/care-profiles/[id]/timeline",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},10051:(e,t,s)=>{Promise.resolve().then(s.bind(s,72052))},72052:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>TimelinePage});var a=s(15329),r=s(97229),l=s(10983),i=s(86125),n=s(97659),c=s(53065),o=s(75542),d=s(70989),m=s(18911),x=s(75203),u=s(38569),p=s(15639),h=s(50146);let b={NOTE:n.Z,SLEEP:c.Z,MEAL:o.Z,SYMPTOM:d.Z,ACTIVITY:m.Z,MEDICATION:x.Z},g={NOTE:"bg-slate-100 text-slate-600",SLEEP:"bg-indigo-100 text-indigo-600",MEAL:"bg-amber-100 text-amber-600",SYMPTOM:"bg-red-100 text-red-600",ACTIVITY:"bg-green-100 text-green-600",MEDICATION:"bg-purple-100 text-purple-600"},j=["\uD83D\uDE22","\uD83D\uDE14","\uD83D\uDE10","\uD83D\uDE42","\uD83D\uDE0A"];function TimelinePage(){let e=(0,l.useParams)(),t=e.id,[s,c]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[m,x]=(0,r.useState)(!0),[y,f]=(0,r.useState)(!1),[N,v]=(0,r.useState)(null),[w,S]=(0,r.useState)("NOTE"),[D,k]=(0,r.useState)(""),[E,P]=(0,r.useState)(null),[_,T]=(0,r.useState)(!1);(0,r.useEffect)(()=>{loadData()},[t]);let loadData=async()=>{try{let[e,s]=await Promise.all([(0,i.W)(`/entries/${t}`),(0,i.W)(`/summaries/${t}`)]);c(e),d(s)}catch(e){console.error("Failed to load data:",e)}finally{x(!1)}},handleCreateEntry=async e=>{e.preventDefault(),T(!0);try{await (0,i.W)(`/entries/${t}`,{method:"POST",body:JSON.stringify({type:w,freeText:D,moodScore:E,timestamp:new Date().toISOString()})}),f(!1),k(""),P(null),loadData()}catch(e){console.error("Failed to create entry:",e)}finally{T(!1)}},generateSummary=async e=>{v(e);try{await (0,i.W)(`/summaries/${t}/daily`,{method:"POST",body:JSON.stringify({date:e})}),loadData()}catch(e){console.error("Failed to generate summary:",e)}finally{v(null)}},C=s.reduce((e,t)=>{let s=new Date(t.timestamp).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"});return e[s]||(e[s]=[]),e[s].push(t),e},{}),getSummaryForDate=e=>{let t=new Date(e).toISOString().split("T")[0];return o.find(e=>e.periodStart.startsWith(t))};return m?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx("div",{className:"animate-pulse text-slate-500",children:"Loading timeline..."})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Timeline"}),(0,a.jsxs)("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition shadow-lg shadow-blue-500/25",children:[a.jsx(u.Z,{className:"w-5 h-5"}),"New Entry"]})]}),y&&(0,a.jsxs)("div",{className:"mb-6 bg-white rounded-xl border border-slate-200 p-6 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"New Entry"}),(0,a.jsxs)("form",{onSubmit:handleCreateEntry,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Type"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(b).map(e=>{let t=b[e];return(0,a.jsxs)("button",{type:"button",onClick:()=>S(e),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition ${w===e?"border-blue-500 bg-blue-50 text-blue-700":"border-slate-200 hover:border-slate-300 text-slate-600"}`,children:[a.jsx(t,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm capitalize",children:e.toLowerCase()})]},e)})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Note"}),a.jsx("textarea",{value:D,onChange:e=>k(e.target.value),required:!0,rows:3,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-900",placeholder:"What happened?"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mood (optional)"}),a.jsx("div",{className:"flex gap-2",children:j.map((e,t)=>a.jsx("button",{type:"button",onClick:()=>P(E===t+1?null:t+1),className:`w-10 h-10 rounded-lg border text-xl transition ${E===t+1?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:e},t))})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{type:"submit",disabled:_,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition",children:_?"Saving...":"Save Entry"}),a.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg transition",children:"Cancel"})]})]})]}),0===Object.keys(C).length?(0,a.jsxs)("div",{className:"text-center py-16 bg-white rounded-xl border border-slate-200",children:[a.jsx(p.Z,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No entries yet"}),a.jsx("p",{className:"text-slate-500 mb-6",children:"Start documenting by creating your first entry"}),(0,a.jsxs)("button",{onClick:()=>f(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:[a.jsx(u.Z,{className:"w-5 h-5"}),"Create Entry"]})]}):a.jsx("div",{className:"space-y-8",children:Object.entries(C).map(([e,t])=>{let s=getSummaryForDate(t[0].timestamp),r=new Date(t[0].timestamp).toISOString().split("T")[0];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:e}),(0,a.jsxs)("button",{onClick:()=>generateSummary(r),disabled:N===r,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg transition",children:[a.jsx(h.Z,{className:"w-4 h-4"}),N===r?"Generating...":s?"Regenerate Summary":"Generate Summary"]})]}),s&&(0,a.jsxs)("div",{className:"mb-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl border border-purple-100 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(h.Z,{className:"w-5 h-5 text-purple-600"}),a.jsx("span",{className:"font-semibold text-purple-900",children:"AI Summary"})]}),a.jsx("p",{className:"text-slate-700 mb-4",children:s.summaryText}),(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[s.insightsJson.positives&&s.insightsJson.positives.length>0&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Positives"}),a.jsx("ul",{className:"mt-1 space-y-1",children:s.insightsJson.positives.map((e,t)=>(0,a.jsxs)("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[a.jsx("span",{className:"text-green-500",children:"âœ“"}),e]},t))})]}),s.insightsJson.concerns&&s.insightsJson.concerns.length>0&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-xs font-medium text-amber-600 uppercase tracking-wide",children:"Concerns"}),a.jsx("ul",{className:"mt-1 space-y-1",children:s.insightsJson.concerns.map((e,t)=>(0,a.jsxs)("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[a.jsx("span",{className:"text-amber-500",children:"!"}),e]},t))})]})]})]}),a.jsx("div",{className:"space-y-3",children:t.map(e=>{let t=b[e.type]||n.Z,s=new Date(e.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return a.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 hover:shadow-sm transition",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${g[e.type]||g.NOTE}`,children:a.jsx(t,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-slate-900 capitalize",children:e.type.toLowerCase()}),a.jsx("span",{className:"text-xs text-slate-400",children:s}),e.moodScore&&a.jsx("span",{className:"ml-auto text-lg",children:j[e.moodScore-1]})]}),a.jsx("p",{className:"text-slate-600",children:e.freeText}),(0,a.jsxs)("p",{className:"text-xs text-slate-400 mt-2",children:["by ",e.author.name]})]})]})},e.id)})})]},e)})})]})}},24794:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>c});var a=s(9104);let r=(0,a.createProxy)(String.raw`/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/care-profiles/[id]/timeline/page.tsx`),{__esModule:l,$$typeof:i}=r,n=r.default,c=n}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[946,101,253,786,53,264,326,728],()=>__webpack_exec__(20310));module.exports=s})();