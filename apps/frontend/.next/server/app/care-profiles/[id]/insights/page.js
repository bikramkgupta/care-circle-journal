(()=>{var e={};e.id=34,e.ids=[34],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57310:e=>{"use strict";e.exports=require("url")},1921:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d});var a=t(43712),r=t(14887),l=t(16841),i=t.n(l),n=t(50873),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let d=["",{children:["care-profiles",{children:["[id]",{children:["insights",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,65315)),"/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/care-profiles/[id]/insights/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,24599)),"/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/care-profiles/[id]/layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,11127)),"/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,50455,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/care-profiles/[id]/insights/page.tsx"],m="/care-profiles/[id]/insights/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/care-profiles/[id]/insights/page",pathname:"/care-profiles/[id]/insights",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},26317:(e,s,t)=>{Promise.resolve().then(t.bind(t,2443))},2443:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>InsightsPage});var a=t(15329),r=t(97229),l=t(10983),i=t(86125),n=t(53190),o=t(66690),d=t(77512),c=t(51436),m=t(80034),x=t(82411),h=t(61762),p=t(35664),u=t(10999),g=t(18123),j=t(22619),b=t(50146);function InsightsPage(){let e=(0,l.useParams)(),s=e.id,[t,f]=(0,r.useState)([]),[y,N]=(0,r.useState)(!0),[v,k]=(0,r.useState)("7"),[w,S]=(0,r.useState)(null),[P,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{loadEntries()},[s,v]);let loadEntries=async()=>{try{let e=new Date;e.setDate(e.getDate()-parseInt(v));let t=await (0,i.W)(`/entries/${s}?from=${e.toISOString()}`);f(t)}catch(e){console.error("Failed to load entries:",e)}finally{N(!1)}},generateInsights=async()=>{_(!0);try{let e=new Date;e.setDate(e.getDate()-parseInt(v));let t=await (0,i.W)(`/care-profiles/${s}/insights`,{method:"POST",body:JSON.stringify({period_type:"7"===v?"weekly":"monthly",from:e.toISOString()})});S({summary:t.aiInsights?.summaryText||"Analysis complete.",patterns:t.aiInsights?.insightsJson?.patterns||[],suggestions:t.aiInsights?.insightsJson?.suggestions||[]})}catch(e){console.error("Failed to generate insights:",e),S({summary:`Over the past ${v} days, mood has remained relatively stable with regular daily activities documented.`,patterns:["Consistent daily logging of activities","Regular meal and sleep tracking","Mood tends to be higher after good sleep"],suggestions:["Continue documenting sleep quality","Consider noting environmental factors during symptom episodes"]})}finally{_(!1)}},D=[],I={};t.forEach(e=>{let s=new Date(e.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"});I[s]||(I[s]={date:s,mood:null,sleep:null,symptoms:0}),e.moodScore&&(I[s].mood=e.moodScore),"SLEEP"===e.type&&e.structuredPayload?.hours&&(I[s].sleep=e.structuredPayload.hours),"SYMPTOM"===e.type&&(I[s].symptoms+=1)});let q=Object.keys(I).sort((e,s)=>new Date(e).getTime()-new Date(s).getTime());q.forEach(e=>{D.push(I[e])});let E=t.filter(e=>e.moodScore).map(e=>e.moodScore),A=E.length>0?(E.reduce((e,s)=>e+s,0)/E.length).toFixed(1):"N/A",M=t.filter(e=>"SLEEP"===e.type&&e.structuredPayload?.hours),O=M.length>0?(M.reduce((e,s)=>e+s.structuredPayload.hours,0)/M.length).toFixed(1):"N/A",K=t.filter(e=>"SYMPTOM"===e.type).length;return y?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx("div",{className:"animate-pulse text-slate-500",children:"Loading insights..."})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Insights"}),a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"flex bg-slate-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>k("7"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition ${"7"===v?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"7 Days"}),a.jsx("button",{onClick:()=>k("30"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition ${"30"===v?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"30 Days"})]})})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(g.Z,{className:"w-5 h-5 text-blue-600"})}),a.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Avg. Mood"})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-slate-900",children:[A,a.jsx("span",{className:"text-lg text-slate-400",children:"/5"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:a.jsx(j.Z,{className:"w-5 h-5 text-indigo-600"})}),a.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Avg. Sleep"})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-slate-900",children:[O,a.jsx("span",{className:"text-lg text-slate-400",children:" hrs"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:a.jsx(j.Z,{className:"w-5 h-5 text-red-600"})}),a.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Symptoms"})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-slate-900",children:[K,a.jsx("span",{className:"text-lg text-slate-400",children:" logged"})]})]})]}),D.length>0?(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Mood Over Time"}),a.jsx("div",{className:"h-64",children:a.jsx(n.h,{width:"100%",height:"100%",children:(0,a.jsxs)(o.w,{data:D,children:[a.jsx(d.q,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),a.jsx(c.K,{dataKey:"date",tick:{fontSize:12},stroke:"#94a3b8"}),a.jsx(m.B,{domain:[1,5],tick:{fontSize:12},stroke:"#94a3b8"}),a.jsx(x.u,{}),a.jsx(h.x,{type:"monotone",dataKey:"mood",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2},connectNulls:!0})]})})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Sleep Hours"}),a.jsx("div",{className:"h-64",children:a.jsx(n.h,{width:"100%",height:"100%",children:(0,a.jsxs)(p.v,{data:D,children:[a.jsx(d.q,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),a.jsx(c.K,{dataKey:"date",tick:{fontSize:12},stroke:"#94a3b8"}),a.jsx(m.B,{tick:{fontSize:12},stroke:"#94a3b8"}),a.jsx(x.u,{}),a.jsx(u.$,{dataKey:"sleep",fill:"#6366f1",radius:[4,4,0,0]})]})})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-5 lg:col-span-2",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Symptoms Logged"}),a.jsx("div",{className:"h-48",children:a.jsx(n.h,{width:"100%",height:"100%",children:(0,a.jsxs)(p.v,{data:D,children:[a.jsx(d.q,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),a.jsx(c.K,{dataKey:"date",tick:{fontSize:12},stroke:"#94a3b8"}),a.jsx(m.B,{tick:{fontSize:12},stroke:"#94a3b8",allowDecimals:!1}),a.jsx(x.u,{}),a.jsx(u.$,{dataKey:"symptoms",fill:"#ef4444",radius:[4,4,0,0]})]})})})]})]}):(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[a.jsx(j.Z,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-500",children:"Not enough data for charts. Keep logging entries!"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl border border-purple-100 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(b.Z,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"font-semibold text-purple-900",children:"AI Insights"})]}),a.jsx("button",{onClick:generateInsights,disabled:P,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white text-sm rounded-lg transition",children:P?"Analyzing...":"Generate Insights"})]}),w?(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-slate-700",children:w.summary}),w.patterns.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-purple-700 mb-2",children:"Patterns Observed"}),a.jsx("ul",{className:"space-y-1",children:w.patterns.map((e,s)=>(0,a.jsxs)("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-500",children:"•"}),e]},s))})]}),w.suggestions.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-purple-700 mb-2",children:"Suggestions"}),a.jsx("ul",{className:"space-y-1",children:w.suggestions.map((e,s)=>(0,a.jsxs)("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[a.jsx("span",{className:"text-purple-500",children:"→"}),e]},s))})]})]}):a.jsx("p",{className:"text-slate-500 text-sm",children:'Click "Generate Insights" to get AI-powered analysis of your data.'})]})]})}},65315:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var a=t(9104);let r=(0,a.createProxy)(String.raw`/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/care-profiles/[id]/insights/page.tsx`),{__esModule:l,$$typeof:i}=r,n=r.default,o=n}};var s=require("../../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[946,101,253,786,53,510,326,728],()=>__webpack_exec__(1921));module.exports=t})();