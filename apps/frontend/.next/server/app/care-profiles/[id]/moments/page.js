(()=>{var e={};e.id=232,e.ids=[232],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57310:e=>{"use strict";e.exports=require("url")},3302:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var a=s(43712),r=s(14887),l=s(16841),i=s.n(l),n=s(50873),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["care-profiles",{children:["[id]",{children:["moments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,28182)),"/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/care-profiles/[id]/moments/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,24599)),"/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/care-profiles/[id]/layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,11127)),"/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,50455,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/care-profiles/[id]/moments/page.tsx"],m="/care-profiles/[id]/moments/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/care-profiles/[id]/moments/page",pathname:"/care-profiles/[id]/moments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2319:(e,t,s)=>{Promise.resolve().then(s.bind(s,14814))},14814:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>MomentsPage});var a=s(15329),r=s(97229),l=s(10983),i=s(86125),n=s(62848);let o=(0,n.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var c=s(78653),d=s(22619);let m=(0,n.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),p=[{value:"all",label:"All"},{value:"therapy",label:"Therapy"},{value:"outdoor",label:"Outdoor"},{value:"progress",label:"Progress"}];function MomentsPage(){let e=(0,l.useParams)(),t=e.id,[s,n]=(0,r.useState)([]),[u,x]=(0,r.useState)(!0),[h,g]=(0,r.useState)("all"),[b,f]=(0,r.useState)(null),[j,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{loadMedia()},[t]);let loadMedia=async()=>{try{let e=await (0,i.W)(`/entries/${t}`),s=[];e.forEach((e,t)=>{"ACTIVITY"===e.type&&t%3==0&&s.push({id:`media-${e.id}`,type:"PHOTO",mimeType:"image/jpeg",createdAt:e.timestamp,entry:{freeText:e.freeText,timestamp:e.timestamp,tags:e.tags}})}),n(s)}catch(e){console.error("Failed to load media:",e)}finally{x(!1)}},v=s.filter(e=>"all"===h||e.entry?.tags?.context?.toLowerCase()===h||e.entry?.tags?.category?.toLowerCase()===h),handleFileUpload=async e=>{let t=e.target.files?.[0];t&&(y(!0),setTimeout(()=>{alert("File upload would be handled here. This requires:\n1. Creating an entry\n2. Getting presigned URL\n3. Uploading to DO Spaces"),y(!1)},1e3))};return u?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx("div",{className:"animate-pulse text-slate-500",children:"Loading moments..."})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Moments"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex items-center gap-2 bg-slate-100 rounded-lg p-1",children:p.map(e=>a.jsx("button",{onClick:()=>g(e.value),className:`px-3 py-1.5 text-sm font-medium rounded-md transition ${h===e.value?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:e.label},e.value))}),(0,a.jsxs)("label",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition cursor-pointer shadow-lg shadow-blue-500/25",children:[a.jsx(o,{className:"w-5 h-5"}),a.jsx("span",{children:j?"Uploading...":"Upload"}),a.jsx("input",{type:"file",accept:"image/*,audio/*",onChange:handleFileUpload,disabled:j,className:"hidden"})]})]})]}),0===v.length?(0,a.jsxs)("div",{className:"text-center py-16 bg-white rounded-xl border border-slate-200",children:[a.jsx(c.Z,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No moments yet"}),a.jsx("p",{className:"text-slate-500 mb-6 max-w-md mx-auto",children:"Capture special moments by uploading photos or audio recordings with your entries."}),(0,a.jsxs)("label",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition cursor-pointer",children:[a.jsx(o,{className:"w-5 h-5"}),"Upload First Moment",a.jsx("input",{type:"file",accept:"image/*,audio/*",onChange:handleFileUpload,className:"hidden"})]})]}):a.jsx("div",{className:"grid gap-4 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4",children:v.map(e=>(0,a.jsxs)("button",{onClick:()=>f(e),className:"aspect-square bg-slate-100 rounded-xl overflow-hidden relative group hover:shadow-lg transition",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-blue-100 to-purple-100",children:a.jsx(c.Z,{className:"w-12 h-12 text-slate-400"})}),(0,a.jsxs)("div",{className:"absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition",children:[a.jsx("p",{className:"text-white text-sm font-medium truncate",children:e.entry?.freeText?.slice(0,50)}),(0,a.jsxs)("p",{className:"text-white/70 text-xs flex items-center gap-1 mt-1",children:[a.jsx(d.Z,{className:"w-3 h-3"}),new Date(e.createdAt).toLocaleDateString()]})]})]},e.id))}),b&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4",children:[a.jsx("button",{onClick:()=>f(null),className:"absolute top-4 right-4 p-2 text-white/70 hover:text-white transition",children:a.jsx(m,{className:"w-8 h-8"})}),(0,a.jsxs)("div",{className:"max-w-4xl w-full bg-white rounded-2xl overflow-hidden",children:[a.jsx("div",{className:"aspect-video bg-slate-100 flex items-center justify-center",children:a.jsx(c.Z,{className:"w-24 h-24 text-slate-300"})}),(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("p",{className:"text-slate-700 mb-2",children:b.entry?.freeText}),(0,a.jsxs)("p",{className:"text-slate-400 text-sm flex items-center gap-2",children:[a.jsx(d.Z,{className:"w-4 h-4"}),new Date(b.createdAt).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})]})]})]})]})]})}},28182:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var a=s(9104);let r=(0,a.createProxy)(String.raw`/Users/bikram/Documents/Build/skills-test/care-circle-journal/care-circle-journal-main/apps/frontend/src/app/care-profiles/[id]/moments/page.tsx`),{__esModule:l,$$typeof:i}=r,n=r.default,o=n}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[946,101,253,786,53,326,728],()=>__webpack_exec__(3302));module.exports=s})();